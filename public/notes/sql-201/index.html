<!doctype html><html lang=en dir=auto><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>SQL 201 |
Agus Fahmi Aji Pramana's Blogging Site
</title><meta name=keywords content><meta name=description content="
    SQL Joins, Views, Stored Procedures, and Transactions"><meta name=author content="Agus Fahmi Aji Pramana"><link rel=canonical href=http://localhost:1313/notes/sql-201/><link crossorigin=anonymous href=/assets/css/stylesheet.606be4c20b063263aae99830f89a0f4bbedcc98a7b8fea0b216f60439a69a571.css integrity="sha256-YGvkwgsGMmOq6Zgw+JoPS77cyYp7j+oLIW9gQ5pppXE=" rel="preload stylesheet" as=style><link crossorigin=anonymous referrerpolicy=no-referrer rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css integrity="sha512-z3gLpd7yknf1YoNbCzqRKc4qyor8gaKU1qmn+CShxbuBusANI9QpRohGBreCFkKxLhei6S9CQXFEbbKuqLg0DA=="><link rel=icon href=http://localhost:1313/favicon.ico type=image/x-icon><link rel=icon type=image/png sizes=16x16 href=http://localhost:1313/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=http://localhost:1313/favicon-32x32.png><link rel=manifest href=/site.webmanifest><link rel=icon type=image/png sizes=192x192 href=http://localhost:1313/img/android-chrome-192x192.png><link rel=icon type=image/png sizes=512x512 href=http://localhost:1313/img/android-chrome-512x512.png><link rel=apple-touch-icon href=http://localhost:1313/img/apple-touch-icon.png><link rel=mask-icon href=http://localhost:1313/safari-pinned-tab.svg color=#2e2e33><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33
  "><link rel=alternate hreflang=en href=http://localhost:1313/notes/sql-201/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="SQL 201"><meta property="og:description" content="SQL Joins, Views, Stored Procedures, and Transactions"><meta property="og:type" content="article"><meta property="og:url" content="http://localhost:1313/notes/sql-201/"><meta property="og:image" content="http://localhost:1313/logo.svg"><meta property="article:section" content="notes"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="http://localhost:1313/logo.svg"><meta name=twitter:title content="SQL 201"><meta name=twitter:description content="SQL Joins, Views, Stored Procedures, and Transactions"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Personal Notes, Learning, Self-Preparation","item":"http://localhost:1313/notes/"},{"@type":"ListItem","position":2,"name":"SQL 201","item":"http://localhost:1313/notes/sql-201/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"SQL 201","name":"SQL 201","description":"SQL Joins, Views, Stored Procedures, and Transactions","keywords":[],"articleBody":"Views is an alternative way of representing data that exists in one or more tables or views. can include all or some of the columns from one or more base tables or existing views. a view creates a named specification of a results table, which can be queried in the same way as a table. can also change the data in the base table by running insert, update, and delete queries against the view. the data that the view represents is stored in the base tables, not by the view itself. Uses Show a selection of data for a given table, so you can omit sensitive data like tax information, birth dates, or salaries. Combine two or more tables in meaningful ways. Simplify access to data by granting access to a view without granting access to the underlying tables. Show only the portions of data relevant to the process that uses the view. CREATE VIEW \u003cview_name\u003e (\u003ccolumn_alias1\u003e, \u003ccolumn_alias2\u003e, ...\u003ccolumn_aliasN\u003e) AS SELECT \u003ccolumn1\u003e, \u003ccolumn2\u003e ... \u003ccolumnN\u003e FROM \u003ctable_name\u003e WHERE \u003cpredicate\u003e; use the CREATE VIEW statement assign a name (up to 128 characters in length) to the view list the columns that you want to include, can use an alias to name the columns if you wish use the AS SELECT clause to specify the columns in the view the FROM clause to specify the base table name can also add an optional WHERE clause to refine the rows in the view CREATE VIEW employee_info ( employee_id, first_name, last_name, address, department_id ) AS SELECT employee_id, first_name, last_name, address, department_id FROM employees; views are dynamic; they consist of the data that would be returned from the SELECT statement used to create them the SELECT statement that you use to create the view can name other views and tables, and it can use the WHERE, GROUP BY, and HAVING clauses. it cannot use the ORDER BY clause or name a host variable. DROP VIEW employee_info; Stored Procedures a stored procedure is a set of SQL statements that are stored and executed on the database server. Instead of sending multiple SQL statements from the client to server, you encapsulate them in a stored procedure on the server and send one statement from the client to execute them. can write stored procedures in many different languages. for Db2 on cloud and Db2, can write in SQL, PL, PL/SQL, Java, C, or other languages. can accept information as parameters, perform, create, read, update, and delete (CRUD) operations return results to the client application Benefits of stored procedures reduction in network traffic because only one call is needed to execute multiple statements. improvement in performance because the processing happens on the server where the data is stored with just the final result being passed back to the client. reuse of code because multiple applications can use the same stored procedure for the same job. increase in security because you do not need to expose all of your table and column information to client-side developers you can use server-side logic to validate data before accepting it into the system Note: that SQL is not a fully fledged programming language, so should not try to write all of your business logic in your stored procedures.\nDELIMITER $$ CREATE PROCEDURE update_salary (IN employee_id CHAR(6), IN rating SMALLINT) BEGIN UPDATE employees SET salary = salary * 1.10 WHERE employee_id = employee_id AND rating = 1; UPDATE employees SET salary = salary * 1.05 WHERE employee_id = employee_id AND rating \u003c\u003e 1; END $$ DELIMITER ; Example DELIMITER @ CREATE PROCEDURE UPDATE_SALEPRICE ( IN Animal_ID INTEGER, IN Animal_Health VARCHAR(5) ) BEGIN IF Animal_Health = 'BAD' THEN UPDATE PETSALE SET SALEPRICE = SALEPRICE - (SALEPRICE * 0.25) WHERE ID = Animal_ID; ELSEIF Animal_Health = 'WORSE' THEN UPDATE PETSALE SET SALEPRICE = SALEPRICE - (SALEPRICE * 0.5) WHERE ID = Animal_ID; ELSE UPDATE PETSALE SET SALEPRICE = SALEPRICE WHERE ID = Animal_ID; END IF; END @ DELIMITER ; Can call stored procedures from\nexternal applications dynamic SQL statements. CALL update_salary ('E201', 1) Transactions a transaction is an indivisible unit of work. can consist of one or more SQL statements, to be considered successful, either all of those SQL statements must complete successfully, leaving the database in a new stable state or none must complete, leaving the database as it was before the transaction began ACID stands for Atomic - All changes must be performed successfully or not at all. Consistent - Data must be in a consistent state before and after the transaction. Isolated - No other process can change the data while the transaction is running. Durable - The changes made by the transaction must persist. ACID Commands BEGIN UPDATE bank_accounts SET balance = balance - 200 WHERE account_name = 'Rose'; UPDATE shoe_shop SET stock = stock -1 WHERE product = 'Boot'; COMMIT Join combines the rows from two or more tables based on a relationship between certain columns in these tables. Primary key: uniquely identifies each row in a table. Foreign key: refers to primary key of another table. Inner Join displays only the rows from two tables that have matching value in a common column usually the primary key of one table that exists as a foreign key in the second table SELECT e.id AS employee_id, s.salary FROM employees e INNER JOIN salaries s ON e.id = s.employee_id Outer Join outer joins also return the rows that do not have a match between the tables Left Outer Join all the rows from the first table (on the left side of the join predicate) are included, and only the matching rows from the second table (on the right side of the join predicate) Right Outer Join all the rows from the right table and combines the information with rows from the left table that match the criteria specified in the query Full Outer Join all matching rows from both tables and all the rows from both tables that donâ€™t have a match. Cross Join returns the Cartesian product of rows from the tables in the join ","wordCount":"1003","inLanguage":"en","datePublished":"0001-01-01T00:00:00Z","dateModified":"0001-01-01T00:00:00Z","author":{"@type":"Person","name":"Agus Fahmi Aji Pramana"},"mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:1313/notes/sql-201/"},"publisher":{"@type":"Organization","name":"Agus Fahmi Aji Pramana's Blogging Site","logo":{"@type":"ImageObject","url":"http://localhost:1313/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=http://localhost:1313/ accesskey=h title="Agus Fahmi Aji Pramana (Alt + H)">Agus Fahmi Aji Pramana</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button><ul class=lang-switch><li>|</li></ul></div></div><ul id=menu><li><a href=http://localhost:1313/about-me title="About Me"><span>About Me</span></a></li><li><a href=http://localhost:1313/blogs title=Blogs><span>Blogs</span></a></li><li><a href=http://localhost:1313/projects title=Projects><span>Projects</span></a></li><li><a href=http://localhost:1313/slides title=Slides><span>Slides</span></a></li><li><a href=http://localhost:1313/honors title=Honors><span>Honors</span></a></li><li><a href=http://localhost:1313/search title="Search (Alt + /)" accesskey=/><i class="fa fa-search"></i></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=http://localhost:1313/>Home</a>&nbsp;Â»&nbsp;<a href=http://localhost:1313/notes/>Personal Notes, Learning, Self-Preparation</a></div><h1 class="post-title entry-hint-parent">SQL 201</h1><div class=post-description>SQL Joins, Views, Stored Procedures, and Transactions</div><div class=post-meta>5 min&nbsp;Â·&nbsp;1003 words&nbsp;Â·&nbsp;Agus Fahmi Aji Pramana</div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Agenda</span></summary><div class=inner><ul><li><a href=#views aria-label=Views>Views</a><ul><li><a href=#uses aria-label=Uses>Uses</a></li></ul></li><li><a href=#stored-procedures aria-label="Stored Procedures">Stored Procedures</a><ul><li><a href=#benefits-of-stored-procedures aria-label="Benefits of stored procedures">Benefits of stored procedures</a></li><li><a href=#example aria-label=Example>Example</a></li></ul></li><li><a href=#transactions aria-label=Transactions>Transactions</a><ul><li><a href=#acid-commands aria-label="ACID Commands">ACID Commands</a></li></ul></li><li><a href=#join aria-label=Join>Join</a><ul><li><a href=#inner-join aria-label="Inner Join">Inner Join</a></li><li><a href=#outer-join aria-label="Outer Join">Outer Join</a><ul><li><a href=#left-outer-join aria-label="Left Outer Join">Left Outer Join</a></li><li><a href=#right-outer-join aria-label="Right Outer Join">Right Outer Join</a></li><li><a href=#full-outer-join aria-label="Full Outer Join">Full Outer Join</a></li></ul></li><li><a href=#cross-join aria-label="Cross Join">Cross Join</a></li></ul></li></ul></div></details></div><div class=post-content><h2 id=views>Views<a hidden class=anchor aria-hidden=true href=#views>#</a></h2><ul><li>is an alternative way of representing data that exists in one or more tables or views.</li><li>can include all or some of the columns from one or more base tables or existing views.</li><li>a view creates a named specification of a results table, which can be queried in the same way as a table.</li><li>can also change the data in the base table by running insert, update, and delete queries against the view.</li><li>the data that the view represents is stored in the base tables, not by the view itself.</li></ul><h3 id=uses>Uses<a hidden class=anchor aria-hidden=true href=#uses>#</a></h3><ul><li>Show a selection of data for a given table, so you can omit sensitive data like tax information, birth dates, or salaries.</li><li>Combine two or more tables in meaningful ways.</li><li>Simplify access to data by granting access to a view without granting access to the underlying tables.</li><li>Show only the portions of data relevant to the process that uses the view.</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>CREATE</span><span class=w> </span><span class=k>VIEW</span><span class=w> </span><span class=o>&lt;</span><span class=n>view_name</span><span class=o>&gt;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>(</span><span class=o>&lt;</span><span class=n>column_alias1</span><span class=o>&gt;</span><span class=p>,</span><span class=w> </span><span class=o>&lt;</span><span class=n>column_alias2</span><span class=o>&gt;</span><span class=p>,</span><span class=w> </span><span class=p>...</span><span class=o>&lt;</span><span class=n>column_aliasN</span><span class=o>&gt;</span><span class=p>)</span><span class=w> </span><span class=k>AS</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>SELECT</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=o>&lt;</span><span class=n>column1</span><span class=o>&gt;</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=o>&lt;</span><span class=n>column2</span><span class=o>&gt;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>...</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=o>&lt;</span><span class=n>columnN</span><span class=o>&gt;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>FROM</span><span class=w> </span><span class=o>&lt;</span><span class=k>table_name</span><span class=o>&gt;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>WHERE</span><span class=w> </span><span class=o>&lt;</span><span class=n>predicate</span><span class=o>&gt;</span><span class=p>;</span><span class=w>
</span></span></span></code></pre></div><ul><li>use the CREATE VIEW statement</li><li>assign a name (up to 128 characters in length) to the view</li><li>list the columns that you want to include, can use an alias to name the columns if you wish</li><li>use the <code>AS SELECT</code> clause to specify the columns in the view</li><li>the FROM clause to specify the base table name</li><li>can also add an optional WHERE clause to refine the rows in the view</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>CREATE</span><span class=w> </span><span class=k>VIEW</span><span class=w> </span><span class=n>employee_info</span><span class=w> </span><span class=p>(</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=n>employee_id</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=n>first_name</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=n>last_name</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=n>address</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=n>department_id</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>)</span><span class=w> </span><span class=k>AS</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>SELECT</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>employee_id</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>first_name</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>last_name</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>address</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>department_id</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>FROM</span><span class=w> </span><span class=n>employees</span><span class=p>;</span><span class=w>
</span></span></span></code></pre></div><ul><li>views are dynamic; they consist of the data that would be returned from the SELECT statement used to create them</li><li>the SELECT statement that you use to create the view can name other views and tables, and</li><li>it can use the WHERE, GROUP BY, and HAVING clauses.</li><li>it cannot use the ORDER BY clause or name a host variable.</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>DROP</span><span class=w> </span><span class=k>VIEW</span><span class=w> </span><span class=n>employee_info</span><span class=p>;</span><span class=w>
</span></span></span></code></pre></div><h2 id=stored-procedures>Stored Procedures<a hidden class=anchor aria-hidden=true href=#stored-procedures>#</a></h2><ul><li>a stored procedure is a set of SQL statements that are stored and executed on the database server.</li><li>Instead of sending multiple SQL statements from the client to server, you encapsulate them in a stored procedure on the server and send one statement from the client to execute them.<ul><li>can write stored procedures in many different languages.<ul><li>for Db2 on cloud and Db2, can write in SQL, PL, PL/SQL, Java, C, or other languages.</li></ul></li><li>can accept information as parameters, perform, create, read, update, and delete (CRUD) operations</li><li>return results to the client application</li></ul></li></ul><h3 id=benefits-of-stored-procedures>Benefits of stored procedures<a hidden class=anchor aria-hidden=true href=#benefits-of-stored-procedures>#</a></h3><ul><li>reduction in network traffic because only one call is needed to execute multiple statements.</li><li>improvement in performance because the processing happens on the server where the data is stored with just the final result being passed back to the client.</li><li>reuse of code because multiple applications can use the same stored procedure for the same job.</li><li>increase in security because<ul><li>you do not need to expose all of your table and column information to client-side developers</li><li>you can use server-side logic to validate data before accepting it into the system</li></ul></li></ul><blockquote><p>Note: that SQL is not a fully fledged programming language, so should not try to write all of your business logic in your stored procedures.</p></blockquote><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>DELIMITER</span><span class=w> </span><span class=err>$$</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>CREATE</span><span class=w> </span><span class=k>PROCEDURE</span><span class=w> </span><span class=n>update_salary</span><span class=w> </span><span class=p>(</span><span class=k>IN</span><span class=w> </span><span class=n>employee_id</span><span class=w> </span><span class=nb>CHAR</span><span class=p>(</span><span class=mi>6</span><span class=p>),</span><span class=w> </span><span class=k>IN</span><span class=w> </span><span class=n>rating</span><span class=w> </span><span class=nb>SMALLINT</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>BEGIN</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>UPDATE</span><span class=w> </span><span class=n>employees</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>SET</span><span class=w> </span><span class=n>salary</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>salary</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=mi>1</span><span class=p>.</span><span class=mi>10</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>WHERE</span><span class=w> </span><span class=n>employee_id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>employee_id</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>AND</span><span class=w> </span><span class=n>rating</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>1</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>UPDATE</span><span class=w> </span><span class=n>employees</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>SET</span><span class=w> </span><span class=n>salary</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>salary</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=mi>1</span><span class=p>.</span><span class=mi>05</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>WHERE</span><span class=w> </span><span class=n>employee_id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>employee_id</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>AND</span><span class=w> </span><span class=n>rating</span><span class=w> </span><span class=o>&lt;&gt;</span><span class=w> </span><span class=mi>1</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>END</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=err>$$</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>DELIMITER</span><span class=w> </span><span class=p>;</span><span class=w>
</span></span></span></code></pre></div><h3 id=example>Example<a hidden class=anchor aria-hidden=true href=#example>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>DELIMITER</span><span class=w> </span><span class=o>@</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>CREATE</span><span class=w> </span><span class=k>PROCEDURE</span><span class=w> </span><span class=n>UPDATE_SALEPRICE</span><span class=w> </span><span class=p>(</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>IN</span><span class=w> </span><span class=n>Animal_ID</span><span class=w> </span><span class=nb>INTEGER</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>IN</span><span class=w> </span><span class=n>Animal_Health</span><span class=w> </span><span class=nb>VARCHAR</span><span class=p>(</span><span class=mi>5</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>BEGIN</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>IF</span><span class=w> </span><span class=n>Animal_Health</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;BAD&#39;</span><span class=w> </span><span class=k>THEN</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>UPDATE</span><span class=w> </span><span class=n>PETSALE</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>SET</span><span class=w> </span><span class=n>SALEPRICE</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>SALEPRICE</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=p>(</span><span class=n>SALEPRICE</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=mi>0</span><span class=p>.</span><span class=mi>25</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>WHERE</span><span class=w> </span><span class=n>ID</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Animal_ID</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>ELSEIF</span><span class=w> </span><span class=n>Animal_Health</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;WORSE&#39;</span><span class=w> </span><span class=k>THEN</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>UPDATE</span><span class=w> </span><span class=n>PETSALE</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>SET</span><span class=w> </span><span class=n>SALEPRICE</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>SALEPRICE</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=p>(</span><span class=n>SALEPRICE</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=mi>0</span><span class=p>.</span><span class=mi>5</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>WHERE</span><span class=w> </span><span class=n>ID</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Animal_ID</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>ELSE</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>UPDATE</span><span class=w> </span><span class=n>PETSALE</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>SET</span><span class=w> </span><span class=n>SALEPRICE</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>SALEPRICE</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>WHERE</span><span class=w> </span><span class=n>ID</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Animal_ID</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>END</span><span class=w> </span><span class=k>IF</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>END</span><span class=w> </span><span class=o>@</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>DELIMITER</span><span class=w> </span><span class=p>;</span><span class=w>
</span></span></span></code></pre></div><p>Can call stored procedures from</p><ul><li>external applications</li><li>dynamic SQL statements.</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>CALL</span><span class=w> </span><span class=n>update_salary</span><span class=w> </span><span class=p>(</span><span class=s1>&#39;E201&#39;</span><span class=p>,</span><span class=w> </span><span class=mi>1</span><span class=p>)</span><span class=w>
</span></span></span></code></pre></div><h2 id=transactions>Transactions<a hidden class=anchor aria-hidden=true href=#transactions>#</a></h2><ul><li>a transaction is an indivisible unit of work.</li><li>can consist of one or more SQL statements,</li><li>to be considered successful,<ul><li>either all of those SQL statements must complete successfully, leaving the database in a new stable state</li><li>or none must complete, leaving the database as it was before the transaction began</li></ul></li><li>ACID stands for<ul><li><strong>Atomic</strong> - All changes must be performed successfully or not at all.</li><li><strong>Consistent</strong> - Data must be in a consistent state before and after the transaction.</li><li><strong>Isolated</strong> - No other process can change the data while the transaction is running.</li><li><strong>Durable</strong> - The changes made by the transaction must persist.</li></ul></li></ul><h3 id=acid-commands>ACID Commands<a hidden class=anchor aria-hidden=true href=#acid-commands>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>BEGIN</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>UPDATE</span><span class=w> </span><span class=n>bank_accounts</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>SET</span><span class=w> </span><span class=n>balance</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>balance</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=mi>200</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>WHERE</span><span class=w> </span><span class=n>account_name</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;Rose&#39;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>UPDATE</span><span class=w> </span><span class=n>shoe_shop</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>SET</span><span class=w> </span><span class=n>stock</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>stock</span><span class=w> </span><span class=o>-</span><span class=mi>1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>WHERE</span><span class=w> </span><span class=n>product</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;Boot&#39;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>COMMIT</span><span class=w>
</span></span></span></code></pre></div><h2 id=join>Join<a hidden class=anchor aria-hidden=true href=#join>#</a></h2><p><input type=checkbox id=zoomCheck-d47be hidden>
<label for=zoomCheck-d47be><img class=zoomCheck loading=lazy decoding=async src=img/join.webp alt=Join></label></p><ul><li>combines the rows from two or more tables based on a relationship between certain columns in these tables.</li><li>Primary key: uniquely identifies each row in a table.</li><li>Foreign key: refers to primary key of another table.</li></ul><h3 id=inner-join>Inner Join<a hidden class=anchor aria-hidden=true href=#inner-join>#</a></h3><ul><li>displays only the rows from two tables that have matching value in a common column</li><li>usually the primary key of one table that exists as a foreign key in the second table</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>SELECT</span><span class=w> </span><span class=n>e</span><span class=p>.</span><span class=n>id</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>employee_id</span><span class=p>,</span><span class=w> </span><span class=n>s</span><span class=p>.</span><span class=n>salary</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>FROM</span><span class=w> </span><span class=n>employees</span><span class=w> </span><span class=n>e</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>INNER</span><span class=w> </span><span class=k>JOIN</span><span class=w> </span><span class=n>salaries</span><span class=w> </span><span class=n>s</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>ON</span><span class=w> </span><span class=n>e</span><span class=p>.</span><span class=n>id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>s</span><span class=p>.</span><span class=n>employee_id</span><span class=w>
</span></span></span></code></pre></div><h3 id=outer-join>Outer Join<a hidden class=anchor aria-hidden=true href=#outer-join>#</a></h3><ul><li>outer joins also return the rows that do not have a match between the tables</li></ul><h4 id=left-outer-join>Left Outer Join<a hidden class=anchor aria-hidden=true href=#left-outer-join>#</a></h4><ul><li>all the rows from the first table (on the left side of the join predicate) are included, and only the matching rows from the second table (on the right side of the join predicate)</li></ul><h4 id=right-outer-join>Right Outer Join<a hidden class=anchor aria-hidden=true href=#right-outer-join>#</a></h4><ul><li>all the rows from the right table and combines the information with rows from the left table that match the criteria specified in the query</li></ul><h4 id=full-outer-join>Full Outer Join<a hidden class=anchor aria-hidden=true href=#full-outer-join>#</a></h4><ul><li>all matching rows from both tables and all the rows from both tables that donâ€™t have a match.</li></ul><h3 id=cross-join>Cross Join<a hidden class=anchor aria-hidden=true href=#cross-join>#</a></h3><ul><li>returns the Cartesian product of rows from the tables in the join</li></ul><p><input type=checkbox id=zoomCheck-67c7c hidden>
<label for=zoomCheck-67c7c><img class=zoomCheck loading=lazy decoding=async src=img/cross-join.webp#center alt="alt text"></label></p></div><footer class=post-footer><ul class=post-tags></ul></footer></article></main><footer class=footer><span>&copy;
2025
<a href=http://localhost:1313/>Agus Fahmi Aji Pramana's Blogging Site</a></span>
| <span><a href=/terms-and-conditions>Terms and Conditions</a>
</span>|
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a>
&
      <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span><br></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})}),document.addEventListener("DOMContentLoaded",function(){var e=document.querySelectorAll(".project");e.forEach(function(e){e.addEventListener("click",function(t){t.target.closest(".small-icons")||window.open(e.getAttribute("data-project-link"),"_blank").focus()})})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>