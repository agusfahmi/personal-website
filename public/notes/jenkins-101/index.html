<!doctype html><html lang=en dir=auto><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Jenkins 101 |
Agus Fahmi Aji Pramana's Blogging Site
</title><meta name=keywords content><meta name=description content="
    Jenkins Notes"><meta name=author content="Agus Fahmi Aji Pramana"><link rel=canonical href=http://localhost:1313/notes/jenkins-101/><link crossorigin=anonymous href=/assets/css/stylesheet.606be4c20b063263aae99830f89a0f4bbedcc98a7b8fea0b216f60439a69a571.css integrity="sha256-YGvkwgsGMmOq6Zgw+JoPS77cyYp7j+oLIW9gQ5pppXE=" rel="preload stylesheet" as=style><link crossorigin=anonymous referrerpolicy=no-referrer rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css integrity="sha512-z3gLpd7yknf1YoNbCzqRKc4qyor8gaKU1qmn+CShxbuBusANI9QpRohGBreCFkKxLhei6S9CQXFEbbKuqLg0DA=="><link rel=icon href=http://localhost:1313/favicon.ico type=image/x-icon><link rel=icon type=image/png sizes=16x16 href=http://localhost:1313/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=http://localhost:1313/favicon-32x32.png><link rel=manifest href=/site.webmanifest><link rel=icon type=image/png sizes=192x192 href=http://localhost:1313/img/android-chrome-192x192.png><link rel=icon type=image/png sizes=512x512 href=http://localhost:1313/img/android-chrome-512x512.png><link rel=apple-touch-icon href=http://localhost:1313/img/apple-touch-icon.png><link rel=mask-icon href=http://localhost:1313/safari-pinned-tab.svg color=#2e2e33><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33
  "><link rel=alternate hreflang=en href=http://localhost:1313/notes/jenkins-101/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script async src="https://www.googletagmanager.com/gtag/js?id=G-PJ6VCR89GD"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-PJ6VCR89GD")}</script><meta property="og:title" content="Jenkins 101"><meta property="og:description" content="Jenkins Notes"><meta property="og:type" content="article"><meta property="og:url" content="http://localhost:1313/notes/jenkins-101/"><meta property="og:image" content="http://localhost:1313/logo.svg"><meta property="article:section" content="notes"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="http://localhost:1313/logo.svg"><meta name=twitter:title content="Jenkins 101"><meta name=twitter:description content="Jenkins Notes"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Personal Notes, Learning, Self-Preparation","item":"http://localhost:1313/notes/"},{"@type":"ListItem","position":2,"name":"Jenkins 101","item":"http://localhost:1313/notes/jenkins-101/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Jenkins 101","name":"Jenkins 101","description":"Jenkins Notes","keywords":[],"articleBody":"why? ease of use intuitive web interface easy to navigate documentation and examples included open source and free free to install and use open source extensibility plugins add functionality new features can be developed terminologies project or job a user-configured description of the work that Jenkins will manage.\nis an outlines for what we want Jenkins to do.\njob and project used interchangeably.\nbuild - one run of a project, a verb or a noun.\nbuild step - a task inside a project.\nbuild trigger - criteria for starting a build, manual or automatic.\nplugins a software package that extends jenkins’ core functionality. pipelines scripted pipeline Groovy-based DSL node {} declarative pipeline specifically designed for configuring Jenkins projects as code. pipeline { agent any options { buildDiscarder(logRotator(daysToKeepStr: '10', numToKeepStr: '10')) timeout(time: 12, unit: 'HOURS') timestamps() } triggers { cron '@midnight' } stages { stage('Initialize') { steps { echo 'Initializing..' } } stage('Build') { steps { echo 'Building..' } } stage('Test') { steps { echo 'Testing..' } } stage('Deploy') { steps { echo 'Deploying....' } } } } agent specifies where pipeline steps will be running any - run on first available system. label - { label 'linux' } - run on a system with this label. docker - { docker { image 'maven' } } - run pipeline inside a docker container using the specified image. none - defer agent selection to stages. allows to use different agent for each state in the pipeline. stages and steps specific parts of the process being automated. use stages name: Build, Test, and Deploy steps: echo - print message git - check out code from a Git repo sh - run a shell script or local command archiveArtifacts - archive artifacts. environment variables named with all capital letters. can be set globally (inside pipeline) or locally (inside stage). echo env.MAX_SIZE echo \"$env.MAX_SIZE\" echo \"${env.MAX_SIZE}\" currentBuild variables refers to the currently running build. properties of variable named currentBuild: currentBuild.startTimeInMillis currentBuild.duration currentBuild.currentResult parameter variables must include a name, default value, and description. use all capital letters in the name for easy identification. parameter types: string, text,boolean, choice and password -\u003e params.PARAMETER_NAME -\u003e \"${params.PARAMETER_NAME}\" pipeline { agent any parameters { ... } ... } conditional expressions conditions for when: branch environment expression when { expression { params.ENVIRONMENT == 'PRODUCTION' } } manual approvals pipeline { agent any stages { state('XYZ') { steps { input message: 'Confirm deployment to production...', ok 'Deploy' } } } } pipeline as code captures project configuration as code. Jenkinsfile (Pipeline script from SCM) supports GitOps approach by using the repo as the single source of truth. Changes are reviewed before being merged and applied using automation. pipeline { tools {...} options {...} triggers {...} stages {...} post {...} } external scripts sh('./scripts/build.sh') bat('..\\scripts\\build.bat') dir(\"${env.WORKSPACE}/environments/test\") { sh(' terraform init terraform plan ') } distribute builds with agents Jenkins controller provides a web interface to manage configuration. best practice is to limit jobs that are run on the controller to free up resources. Node: a server or system connected to a Jenkins controller. Agent: a process running on a node that manages jobs and reports status to the Jenkins controller. ssh nodes connect to servers using SSH keys system must accept SSH connections a user and key must be in place for Jenkins to use Java must be installed. docker nodes run jobs in new containers on every build tips for using nodes and agents agent configuration, start using label instead of any: agent { label 'linux' } agent { docker ... } tool configuration, allowing more control over the version of specific tool: tools { maven 'Maven-3.8.4' } checking out code when a job is associated with a repository: git branch: 'master', url: 'https://github.com//.git' securing Jenkins out-of-the-box security locked by default initial admin password user accounts for individuals with usernames and passwords. security realms controls how a person is authenticated to access resources. provides an interface to manage identities and their authorization to use a resource. Jenkins built-in user database is the default security realm. Jenkins can delegate authorization to other realms. LDAP Unix/Linux users and groups. matrix-based security enable with matrix authorization strategy plugin. permissions are assigned per user. permissions are assigned per action. review “Disable Access Control” if you get locked out. Note: Be sure to assign admin permissions to key accounts when implementing matrix-based security. Failing to assign permission correctly may lock out admin users.\nproject-based permissions permissions are applied globally with matrix-based authorization. project-based authorization can be used to limit permissions to specific jobs and folders. enabled the same as matrix-based permissions. additional permissions can be configured for individual projects. secrets and credentials Jenkins can store and manage sensitive information. Sensitive information is referred to as a credential. Types of credentials: Usernames and passwords SSH keys Files Text strings (API keys or security tokens.) accessing credentials credentials() - assigns values to one or more environment variables. environment { STRING = credentials('secret-value') # string type LOGIN = credentials('login') # login type } env.STRING env.LOGIN - username:password env.LOGIN_USR - username env.LOGIN_PSW - password withCredentials() {} steps { withCredentials([string(credentialsId:'apiKey', variable: 'API_KEY')]) { sh \"./build_script.sh ${env.API_KEY}\" } } reference https://www.linkedin.com/learning/jenkins-essential-training-17420152/challenge-configure-users-and-permissions ","wordCount":"858","inLanguage":"en","datePublished":"0001-01-01T00:00:00Z","dateModified":"0001-01-01T00:00:00Z","author":{"@type":"Person","name":"Agus Fahmi Aji Pramana"},"mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:1313/notes/jenkins-101/"},"publisher":{"@type":"Organization","name":"Agus Fahmi Aji Pramana's Blogging Site","logo":{"@type":"ImageObject","url":"http://localhost:1313/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=http://localhost:1313/ accesskey=h title="Agus Fahmi Aji Pramana (Alt + H)">Agus Fahmi Aji Pramana</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button><ul class=lang-switch><li>|</li></ul></div></div><ul id=menu><li><a href=http://localhost:1313/about-me title="About Me"><span>About Me</span></a></li><li><a href=http://localhost:1313/blogs title=Blogs><span>Blogs</span></a></li><li><a href=http://localhost:1313/projects title=Projects><span>Projects</span></a></li><li><a href=http://localhost:1313/slides title=Slides><span>Slides</span></a></li><li><a href=http://localhost:1313/honors title=Honors><span>Honors</span></a></li><li><a href=http://localhost:1313/search title="Search (Alt + /)" accesskey=/><i class="fa fa-search"></i></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=http://localhost:1313/>Home</a>&nbsp;»&nbsp;<a href=http://localhost:1313/notes/>Personal Notes, Learning, Self-Preparation</a></div><h1 class="post-title entry-hint-parent">Jenkins 101</h1><div class=post-description>Jenkins Notes</div><div class=post-meta>5 min&nbsp;·&nbsp;858 words&nbsp;·&nbsp;Agus Fahmi Aji Pramana</div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Agenda</span></summary><div class=inner><ul><li><a href=#why aria-label=why?>why?</a></li><li><a href=#terminologies aria-label=terminologies>terminologies</a><ul><li><a href=#project-or-job aria-label="project or job">project or job</a></li><li><a href=#plugins aria-label=plugins>plugins</a></li></ul></li><li><a href=#pipelines aria-label=pipelines>pipelines</a><ul><li><a href=#scripted-pipeline aria-label="scripted pipeline">scripted pipeline</a></li><li><a href=#declarative-pipeline aria-label="declarative pipeline">declarative pipeline</a></li><li><a href=#agent aria-label=agent>agent</a></li><li><a href=#stages-and-steps aria-label="stages and steps">stages and steps</a></li><li><a href=#environment-variables aria-label="environment variables">environment variables</a></li><li><a href=#currentbuild-variables aria-label="currentBuild variables">currentBuild variables</a></li><li><a href=#parameter-variables aria-label="parameter variables">parameter variables</a></li><li><a href=#conditional-expressions aria-label="conditional expressions">conditional expressions</a></li><li><a href=#manual-approvals aria-label="manual approvals">manual approvals</a></li></ul></li><li><a href=#pipeline-as-code aria-label="pipeline as code">pipeline as code</a><ul><li><a href=#external-scripts aria-label="external scripts">external scripts</a></li></ul></li><li><a href=#distribute-builds-with-agents aria-label="distribute builds with agents">distribute builds with agents</a><ul><li><a href=#ssh-nodes aria-label="ssh nodes">ssh nodes</a></li><li><a href=#docker-nodes aria-label="docker nodes">docker nodes</a></li><li><a href=#tips-for-using-nodes-and-agents aria-label="tips for using nodes and agents">tips for using nodes and agents</a></li></ul></li><li><a href=#securing-jenkins aria-label="securing Jenkins">securing Jenkins</a><ul><li><a href=#security-realms aria-label="security realms">security realms</a></li><li><a href=#matrix-based-security aria-label="matrix-based security">matrix-based security</a></li><li><a href=#project-based-permissions aria-label="project-based permissions">project-based permissions</a></li><li><a href=#secrets-and-credentials aria-label="secrets and credentials">secrets and credentials</a><ul><li><a href=#accessing-credentials aria-label="accessing credentials">accessing credentials</a></li></ul></li></ul></li><li><a href=#reference aria-label=reference>reference</a></li></ul></div></details></div><div class=post-content><h2 id=why>why?<a hidden class=anchor aria-hidden=true href=#why>#</a></h2><ul><li>ease of use<ul><li>intuitive web interface</li><li>easy to navigate</li><li>documentation and examples included</li></ul></li><li>open source and free<ul><li>free to install and use</li><li>open source</li></ul></li><li>extensibility<ul><li>plugins add functionality</li><li>new features can be developed</li></ul></li></ul><h2 id=terminologies>terminologies<a hidden class=anchor aria-hidden=true href=#terminologies>#</a></h2><h3 id=project-or-job>project or job<a hidden class=anchor aria-hidden=true href=#project-or-job>#</a></h3><ul><li><p>a user-configured description of the work that Jenkins will manage.</p></li><li><p>is an outlines for what we want Jenkins to do.</p></li><li><p>job and project used interchangeably.</p></li><li><p>build - one run of a project, a verb or a noun.</p></li><li><p>build step - a task inside a project.</p></li><li><p>build trigger - criteria for starting a build, manual or automatic.</p></li></ul><h3 id=plugins>plugins<a hidden class=anchor aria-hidden=true href=#plugins>#</a></h3><ul><li>a software package that extends jenkins&rsquo; core functionality.</li></ul><h2 id=pipelines>pipelines<a hidden class=anchor aria-hidden=true href=#pipelines>#</a></h2><h3 id=scripted-pipeline>scripted pipeline<a hidden class=anchor aria-hidden=true href=#scripted-pipeline>#</a></h3><ul><li>Groovy-based DSL</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>node <span class=o>{}</span>
</span></span></code></pre></div><h3 id=declarative-pipeline>declarative pipeline<a hidden class=anchor aria-hidden=true href=#declarative-pipeline>#</a></h3><ul><li>specifically designed for configuring Jenkins projects as code.</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>pipeline <span class=o>{</span>
</span></span><span class=line><span class=cl>    agent any
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    options <span class=o>{</span>
</span></span><span class=line><span class=cl>        buildDiscarder<span class=o>(</span>logRotator<span class=o>(</span>daysToKeepStr: <span class=s1>&#39;10&#39;</span>, numToKeepStr: <span class=s1>&#39;10&#39;</span><span class=o>))</span>
</span></span><span class=line><span class=cl>        timeout<span class=o>(</span>time: 12, unit: <span class=s1>&#39;HOURS&#39;</span><span class=o>)</span>
</span></span><span class=line><span class=cl>        timestamps<span class=o>()</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>    triggers <span class=o>{</span>
</span></span><span class=line><span class=cl>          cron <span class=s1>&#39;@midnight&#39;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>    stages <span class=o>{</span>
</span></span><span class=line><span class=cl>        stage<span class=o>(</span><span class=s1>&#39;Initialize&#39;</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            steps <span class=o>{</span>
</span></span><span class=line><span class=cl>                <span class=nb>echo</span> <span class=s1>&#39;Initializing..&#39;</span>
</span></span><span class=line><span class=cl>            <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>        stage<span class=o>(</span><span class=s1>&#39;Build&#39;</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            steps <span class=o>{</span>
</span></span><span class=line><span class=cl>                <span class=nb>echo</span> <span class=s1>&#39;Building..&#39;</span>
</span></span><span class=line><span class=cl>            <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>        stage<span class=o>(</span><span class=s1>&#39;Test&#39;</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            steps <span class=o>{</span>
</span></span><span class=line><span class=cl>                <span class=nb>echo</span> <span class=s1>&#39;Testing..&#39;</span>
</span></span><span class=line><span class=cl>            <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>        stage<span class=o>(</span><span class=s1>&#39;Deploy&#39;</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            steps <span class=o>{</span>
</span></span><span class=line><span class=cl>                <span class=nb>echo</span> <span class=s1>&#39;Deploying....&#39;</span>
</span></span><span class=line><span class=cl>            <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></div><h3 id=agent>agent<a hidden class=anchor aria-hidden=true href=#agent>#</a></h3><ul><li>specifies where pipeline steps will be running<ul><li><code>any</code> - run on first available system.</li><li><code>label</code> - <code>{ label 'linux' }</code> - run on a system with this label.</li><li><code>docker</code> - <code>{ docker { image 'maven' } }</code> - run pipeline inside a docker container using the specified image.</li><li><code>none</code> - defer agent selection to stages. allows to use different agent for each state in the pipeline.</li></ul></li></ul><h3 id=stages-and-steps>stages and steps<a hidden class=anchor aria-hidden=true href=#stages-and-steps>#</a></h3><ul><li>specific parts of the process being automated.</li><li>use stages name: Build, Test, and Deploy</li><li>steps:<ul><li><code>echo</code> - print message</li><li><code>git</code> - check out code from a Git repo</li><li><code>sh</code> - run a shell script or local command</li><li><code>archiveArtifacts</code> - archive artifacts.</li></ul></li></ul><h3 id=environment-variables>environment variables<a hidden class=anchor aria-hidden=true href=#environment-variables>#</a></h3><ul><li>named with all capital letters.</li><li>can be set globally (inside pipeline) or locally (inside stage).</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>echo</span> env.MAX_SIZE
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;</span><span class=nv>$env</span><span class=s2>.MAX_SIZE&#34;</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;</span><span class=si>${</span><span class=nv>env</span><span class=p>.MAX_SIZE</span><span class=si>}</span><span class=s2>&#34;</span>
</span></span></code></pre></div><h3 id=currentbuild-variables>currentBuild variables<a hidden class=anchor aria-hidden=true href=#currentbuild-variables>#</a></h3><ul><li>refers to the currently running build.</li><li>properties of variable named currentBuild:<ul><li><code>currentBuild.startTimeInMillis</code></li><li><code>currentBuild.duration</code></li><li><code>currentBuild.currentResult</code></li></ul></li></ul><h3 id=parameter-variables>parameter variables<a hidden class=anchor aria-hidden=true href=#parameter-variables>#</a></h3><ul><li>must include a name, default value, and description.</li><li>use all capital letters in the name for easy identification.</li><li>parameter types: string, text,boolean, choice and password</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>-&gt; params.PARAMETER_NAME
</span></span><span class=line><span class=cl>-&gt; <span class=s2>&#34;</span><span class=si>${</span><span class=nv>params</span><span class=p>.PARAMETER_NAME</span><span class=si>}</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>pipeline <span class=o>{</span>
</span></span><span class=line><span class=cl>  agent any
</span></span><span class=line><span class=cl>  parameters <span class=o>{</span>
</span></span><span class=line><span class=cl>    ...
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl>  ...
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></div><h3 id=conditional-expressions>conditional expressions<a hidden class=anchor aria-hidden=true href=#conditional-expressions>#</a></h3><ul><li>conditions for when:<ul><li>branch</li><li>environment</li><li>expression</li></ul></li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>when <span class=o>{</span>
</span></span><span class=line><span class=cl>  expression <span class=o>{</span>
</span></span><span class=line><span class=cl>    params.ENVIRONMENT <span class=o>==</span> <span class=s1>&#39;PRODUCTION&#39;</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></div><h3 id=manual-approvals>manual approvals<a hidden class=anchor aria-hidden=true href=#manual-approvals>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>pipeline <span class=o>{</span>
</span></span><span class=line><span class=cl>  agent any
</span></span><span class=line><span class=cl>  stages <span class=o>{</span>
</span></span><span class=line><span class=cl>    state<span class=o>(</span><span class=s1>&#39;XYZ&#39;</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>      steps <span class=o>{</span>
</span></span><span class=line><span class=cl>        input message: <span class=s1>&#39;Confirm deployment to production...&#39;</span>, ok <span class=s1>&#39;Deploy&#39;</span>
</span></span><span class=line><span class=cl>      <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></div><h2 id=pipeline-as-code>pipeline as code<a hidden class=anchor aria-hidden=true href=#pipeline-as-code>#</a></h2><ul><li>captures project configuration as code.</li><li>Jenkinsfile (Pipeline script from SCM)</li><li>supports GitOps approach by using the repo as the single source of truth.</li><li>Changes are reviewed before being merged and applied using automation.</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>pipeline <span class=o>{</span>
</span></span><span class=line><span class=cl>  tools <span class=o>{</span>...<span class=o>}</span>
</span></span><span class=line><span class=cl>  options <span class=o>{</span>...<span class=o>}</span>
</span></span><span class=line><span class=cl>  triggers <span class=o>{</span>...<span class=o>}</span>
</span></span><span class=line><span class=cl>  stages <span class=o>{</span>...<span class=o>}</span>
</span></span><span class=line><span class=cl>  post <span class=o>{</span>...<span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></div><h3 id=external-scripts>external scripts<a hidden class=anchor aria-hidden=true href=#external-scripts>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sh<span class=o>(</span><span class=s1>&#39;./scripts/build.sh&#39;</span><span class=o>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>bat<span class=o>(</span><span class=s1>&#39;..\scripts\build.bat&#39;</span><span class=o>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>dir<span class=o>(</span><span class=s2>&#34;</span><span class=si>${</span><span class=nv>env</span><span class=p>.WORKSPACE</span><span class=si>}</span><span class=s2>/environments/test&#34;</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>  sh<span class=o>(</span><span class=s1>&#39;
</span></span></span><span class=line><span class=cl><span class=s1>    terraform init
</span></span></span><span class=line><span class=cl><span class=s1>    terraform plan
</span></span></span><span class=line><span class=cl><span class=s1>  &#39;</span><span class=o>)</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></div><h2 id=distribute-builds-with-agents>distribute builds with agents<a hidden class=anchor aria-hidden=true href=#distribute-builds-with-agents>#</a></h2><ul><li>Jenkins controller provides a web interface to manage configuration.</li><li>best practice is to limit jobs that are run on the controller to free up resources.</li><li>Node: a server or system connected to a Jenkins controller.</li><li>Agent: a process running on a node that manages jobs and reports status to the Jenkins controller.</li></ul><p><input type=checkbox id=zoomCheck-16993 hidden>
<label for=zoomCheck-16993><img class=zoomCheck loading=lazy decoding=async src=img/jenkins-architecture.webp alt="Jenkins Architecture"></label></p><h3 id=ssh-nodes>ssh nodes<a hidden class=anchor aria-hidden=true href=#ssh-nodes>#</a></h3><ul><li>connect to servers using SSH keys</li><li>system must accept SSH connections</li><li>a user and key must be in place for Jenkins to use</li><li>Java must be installed.</li></ul><h3 id=docker-nodes>docker nodes<a hidden class=anchor aria-hidden=true href=#docker-nodes>#</a></h3><ul><li>run jobs in new containers on every build</li></ul><h3 id=tips-for-using-nodes-and-agents>tips for using nodes and agents<a hidden class=anchor aria-hidden=true href=#tips-for-using-nodes-and-agents>#</a></h3><ul><li>agent configuration, start using label instead of <code>any</code>:</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>agent <span class=o>{</span>
</span></span><span class=line><span class=cl>  label <span class=s1>&#39;linux&#39;</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>agent <span class=o>{</span>
</span></span><span class=line><span class=cl>  docker ...
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></div><ul><li>tool configuration, allowing more control over the version of specific tool:</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>tools <span class=o>{</span>
</span></span><span class=line><span class=cl>  maven <span class=s1>&#39;Maven-3.8.4&#39;</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></div><ul><li>checking out code when a job is associated with a repository:</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>git branch: <span class=s1>&#39;master&#39;</span>,
</span></span><span class=line><span class=cl>  url: <span class=s1>&#39;https://github.com/&lt;org&gt;/&lt;repo&gt;.git&#39;</span>
</span></span></code></pre></div><h2 id=securing-jenkins>securing Jenkins<a hidden class=anchor aria-hidden=true href=#securing-jenkins>#</a></h2><ul><li>out-of-the-box security<ul><li>locked by default</li><li>initial admin password</li></ul></li><li>user accounts for individuals with usernames and passwords.</li></ul><h3 id=security-realms>security realms<a hidden class=anchor aria-hidden=true href=#security-realms>#</a></h3><ul><li>controls how a person is authenticated to access resources.</li><li>provides an interface to manage identities and their authorization to use a resource.</li><li>Jenkins built-in user database is the default security realm.</li><li>Jenkins can delegate authorization to other realms.<ul><li>LDAP</li><li>Unix/Linux users and groups.</li></ul></li></ul><h3 id=matrix-based-security>matrix-based security<a hidden class=anchor aria-hidden=true href=#matrix-based-security>#</a></h3><ul><li>enable with matrix authorization strategy plugin.</li><li>permissions are assigned per user.</li><li>permissions are assigned per action.</li><li>review &ldquo;Disable Access Control&rdquo; if you get locked out.</li></ul><blockquote><p>Note: Be sure to assign admin permissions to key accounts when implementing matrix-based security. Failing to assign permission correctly may lock out admin users.</p></blockquote><h3 id=project-based-permissions>project-based permissions<a hidden class=anchor aria-hidden=true href=#project-based-permissions>#</a></h3><ul><li>permissions are applied globally with matrix-based authorization.</li><li>project-based authorization can be used to limit permissions to specific jobs and folders.</li><li>enabled the same as matrix-based permissions.</li><li>additional permissions can be configured for individual projects.</li></ul><h3 id=secrets-and-credentials>secrets and credentials<a hidden class=anchor aria-hidden=true href=#secrets-and-credentials>#</a></h3><ul><li>Jenkins can store and manage sensitive information.</li><li>Sensitive information is referred to as a credential.</li><li>Types of credentials:<ul><li>Usernames and passwords</li><li>SSH keys</li><li>Files</li><li>Text strings (API keys or security tokens.)</li></ul></li></ul><h4 id=accessing-credentials>accessing credentials<a hidden class=anchor aria-hidden=true href=#accessing-credentials>#</a></h4><ul><li><code>credentials()</code> - assigns values to one or more environment variables.</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>environment <span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=nv>STRING</span> <span class=o>=</span> credentials<span class=o>(</span><span class=s1>&#39;secret-value&#39;</span><span class=o>)</span> <span class=c1># string type</span>
</span></span><span class=line><span class=cl>  <span class=nv>LOGIN</span> <span class=o>=</span> credentials<span class=o>(</span><span class=s1>&#39;login&#39;</span><span class=o>)</span> <span class=c1># login type</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>env.STRING
</span></span><span class=line><span class=cl>env.LOGIN - username:password
</span></span><span class=line><span class=cl>env.LOGIN_USR - username
</span></span><span class=line><span class=cl>env.LOGIN_PSW - password
</span></span></code></pre></div><ul><li><code>withCredentials() {}</code></li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>steps <span class=o>{</span>
</span></span><span class=line><span class=cl>  withCredentials<span class=o>([</span>string<span class=o>(</span>credentialsId:<span class=s1>&#39;apiKey&#39;</span>, variable: <span class=s1>&#39;API_KEY&#39;</span><span class=o>)])</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    sh <span class=s2>&#34;./build_script.sh </span><span class=si>${</span><span class=nv>env</span><span class=p>.API_KEY</span><span class=si>}</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></div><h2 id=reference>reference<a hidden class=anchor aria-hidden=true href=#reference>#</a></h2><ul><li><a href=https://www.linkedin.com/learning/jenkins-essential-training-17420152/challenge-configure-users-and-permissions>https://www.linkedin.com/learning/jenkins-essential-training-17420152/challenge-configure-users-and-permissions</a></li></ul></div><footer class=post-footer><ul class=post-tags></ul></footer></article></main><footer class=footer><span>&copy;
2025
<a href=http://localhost:1313/>Agus Fahmi Aji Pramana's Blogging Site</a></span>
| <span><a href=/terms-and-conditions>Terms and Conditions</a>
</span>|
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a>
&
      <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span><br></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})}),document.addEventListener("DOMContentLoaded",function(){var e=document.querySelectorAll(".project");e.forEach(function(e){e.addEventListener("click",function(t){t.target.closest(".small-icons")||window.open(e.getAttribute("data-project-link"),"_blank").focus()})})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>